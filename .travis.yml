language: bash

services: docker

env:
  global:
    - secure: "GqxiCVwSUY138INNYSU+Z4l3pHMeO7bBtQek1cvKptVOijlP5XK066So40OYLdwZrPdisHWiBvx/VoeIG5Uv+7s+8L8uvbAnVDOP3Pf6ykDqp/tu+s10yBJlCFjbMtcMCtp2CSeZRBJ/7AKnK5C8RsrpJbvcTRmBIgrkzxXGcgvfTWyXUWj4n9mMfq0zJp3MX8lfupwd/9U2IioMptKTddiQ3lrqRLAQUyresJwdRon6NpWbEUFbe8h+NwRv6nSlEu51D9KIXvfSVpkTx6JhEIydz2Zj+q+e6t9xvIJjjdNT2A2NvrC8Gwe2yx2JG56+Bxz8Ew32yjJjtztxyaMOq2Bg+9URArrVeCiS/zT2JnSHImu5z3cD8P5uIZS8g2wA5yaIZtYPovjrZUD50SsrLVn2HlYkB3KoS5amFcO0z8f1RiATLGpcbU9HxS/JecW2FXHlV8NOzrZg9LhDEI5ZcQKgTElHe07OZvBx+9xw+jqrohXngUBTcUilJsCwkbd+lHXJo/LGlRPeRVjRle6n2u49Gavnr5cDF49OK+4JKbgFnaU/Ft2n86Zkm8BgRSEfpqZUXBADhqZvHqcbx2OugtsWiWx2VVB6m3ZNR5Cz1iDr+gT+FILoMwN027mavsZ4OdtgVQLtwl3OydlEbgwRcPsQFh9MyP+wft0pSwubVW0="
    - secure: "itHO3mVbhjNMtDop6tipepCdxdvTjxxtAugo33aeOPF+6PYCax78h9vOl5EF5UBFuMqdClecYxf2jeGY+Q+qiJYIDa4BL+qVJP4yOg/fL3Ljp0xePNggqG0T9hGwfxcB3GVbiZD55n7vNe3dG9u78iP6jEBGX6uKCQQyJRnTSzcJlRPHd9IGV+FFv0xuMmPDJpcQzbFhbaGP6oiMDdKvgLhM1MhgocHz0+a8EMtXpndVTPFyvqMyrMIueBVkT6bwK9hBjFi+4PMTAIYsHik2I25eRiVURpums7g4ytGhFBgbWhqoj2aUYTku0bXFZHxEQxJfW2lKlxFHVPtm6vpSpQpizzNi+f7QpWVEVm6IcL6z6u4rJDkppEIEMwiEuzZrQojsdWhmUiHXAuqxo6M6eRrrQVayqCZAxwjKPg9Ss+KIVdsWBtHBXmiAkvBaJZNAJ3QPlXrdQSWBi5JCeF52wOnYU1quRw4EwCLo46EdSBPT30tMxYUUmGYd1Y7RoErW3scXMyM21mJEXkfIlouNo2dEArle7/5kU4nYVojl2Y3AyJjIk9Tzag/Gghoo/x+aDvo8SEoVzrmChM2nwE8mkOfP7vMSjfrQjuTlRjs0xGaM45ux6qHbcgComvtXNOSMzdZ7waecPt3yz/e15Ev97dt1yjz0HgwDarig0K78dgY="
  matrix:
    - VERSION=latest

before_script:
  - cd src/
  - IMAGE_NAME="chesszebra/$(echo "$TRAVIS_REPO_SLUG" | cut -c 25-):${VERSION}"

script:
  - docker build -t "$IMAGE_NAME" .
  - docker tag "$IMAGE_NAME" "$IMAGE_NAME"

after_success:
  - docker login --username $DOCKER_USER --password $DOCKER_PASS
  - docker push $IMAGE_NAME

after_script:
  - docker images

notifications:
  email: false
